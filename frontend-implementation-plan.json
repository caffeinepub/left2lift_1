{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Left2Lift — Frontend Implementation for AI-Powered Food Redistribution Platform",
  "requirements": [
    {
      "id": "REQ-2",
      "summary": "Implement Internet Identity authentication with first-login role selection screen and role-based routing",
      "acceptanceCriteria": [
        "New principal sees role selection screen (static, no animations)",
        "Role is persisted in backend after selection",
        "Returning principal is routed to their role panel without role selection",
        "Login screen has zero CSS transitions or keyframe animations"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/LoginButton.tsx",
          "operation": "create",
          "description": "Create login/logout button component using the authorization component's useInternetIdentity hook. Include login, logout, and status display. No CSS animations or transitions on this component."
        },
        {
          "path": "frontend/src/components/RoleSelectionScreen.tsx",
          "operation": "create",
          "description": "Create role selection screen with three static buttons for Hotel, NGO, and Admin roles. No CSS transitions or keyframe animations. Calls saveCallerUserProfile with selected role as appRole and a displayName input field. Shows only when getCallerUserProfile returns null."
        },
        {
          "path": "frontend/src/hooks/useGetCallerUserProfile.ts",
          "operation": "create",
          "description": "Create hook to fetch the caller's UserProfile using getCallerUserProfile backend method. Use authorization component's pattern to prevent modal flash by checking actor availability and proper loading states. Returns UserProfile | null."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add authentication check using the authorization component's useInternetIdentity hook. Show LoginButton when not authenticated. Show RoleSelectionScreen when authenticated but getCallerUserProfile returns null. Route to role-specific panel (Hotel, NGO, or Admin) based on userProfile.appRole when profile exists. Verify the authorization component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Build Hotel Panel frontend with donation submission form and dashboard",
      "acceptanceCriteria": [
        "All form fields are present as specified with correct input types",
        "No lat/lng number inputs — pickup address is a single plain text field",
        "Spoilage result and matched NGO are shown after submission",
        "Dashboard metrics are computed from backend data",
        "Donation history table shows date, food type, quantity, and status columns"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/hotel/HotelDonationForm.tsx",
          "operation": "create",
          "description": "Create donation submission form with: food type dropdown (Rice, Curry, Bread, Desserts, Vegetables, Fish, Dairy, Other), quantity kg number input, time since cooked hours number input, storage condition dropdown (Refrigerated, Room Temperature, Hot), pickup address plain text input (single field, no lat/lng), pickup deadline datetime-local input. On submit call submitDonation backend method and display result card showing spoilageSafe bool and matched NGO principal/name if returned."
        },
        {
          "path": "frontend/src/components/hotel/HotelDashboard.tsx",
          "operation": "create",
          "description": "Create hotel dashboard view displaying: total donations submitted count, total kg donated sum, successful deliveries count (status=Completed), estimated people fed (total kg × 2.5), and donation history table with columns: submittedAt date, foodType, quantityKg, status. Fetch data from getMyHotelDonations backend method."
        },
        {
          "path": "frontend/src/pages/HotelPanel.tsx",
          "operation": "create",
          "description": "Create hotel panel page with tab navigation between HotelDonationForm and HotelDashboard views. Guard with appRole check to ensure only Hotel users access this page."
        },
        {
          "path": "frontend/src/hooks/useSubmitDonation.ts",
          "operation": "create",
          "description": "Create mutation hook for submitDonation backend method. Accept form data and return spoilageSafe bool and matched NGO principal."
        },
        {
          "path": "frontend/src/hooks/useGetMyHotelDonations.ts",
          "operation": "create",
          "description": "Create query hook to fetch getMyHotelDonations from backend. Returns array of Donation records for the calling hotel principal."
        }
      ]
    },
    {
      "id": "REQ-7",
      "summary": "Implement NGO profile registration form",
      "acceptanceCriteria": [
        "NGO can register and update their profile",
        "Location is stored as plain text — no lat/lng fields",
        "Food type preferences stored as an array",
        "Profile is retrievable by the NGO's principal ID"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ngo/NGOProfileForm.tsx",
          "operation": "create",
          "description": "Create NGO profile registration form with fields: organization name text input, location address plain text input (no lat/lng), food type preferences multi-select checkboxes (Rice, Curry, Bread, Desserts, Vegetables, Fish, Dairy, Other), daily capacity kg number input. On submit call registerNGO backend method. Show this form if getMyNGOProfile returns null after role selection."
        },
        {
          "path": "frontend/src/hooks/useRegisterNGO.ts",
          "operation": "create",
          "description": "Create mutation hook for registerNGO backend method accepting orgName, locationAddress, foodTypePreferences array, and dailyCapacityKg."
        },
        {
          "path": "frontend/src/hooks/useGetMyNGOProfile.ts",
          "operation": "create",
          "description": "Create query hook to fetch getMyNGOProfile from backend. Returns NGOProfile | null for the calling NGO principal."
        }
      ]
    },
    {
      "id": "REQ-8",
      "summary": "Build NGO Panel frontend with donation requests view, dashboard, and feedback form",
      "acceptanceCriteria": [
        "Donation requests are filtered by NGO principal ID from backend",
        "Remaining safe hours are calculated and displayed on each donation card",
        "Accept/Reject update donation status in backend and reflect immediately in UI",
        "Dashboard metrics are computed from backend data",
        "Feedback form appears only for Completed donations"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ngo/NGODonationRequests.tsx",
          "operation": "create",
          "description": "Create donation requests view fetching getMyNGODonations. Display cards for each donation showing: foodType, quantityKg, remaining safe hours calculated as (pickupDeadline - Date.now()), hotel name from hotelPrincipal lookup, pickupAddress. Include Accept and Reject buttons calling acceptDonation and rejectDonation backend methods. Show both pending and accepted donations. Invalidate query cache after accept/reject to reflect new status immediately."
        },
        {
          "path": "frontend/src/components/ngo/NGODashboard.tsx",
          "operation": "create",
          "description": "Create NGO dashboard displaying: total donations received count, total kg received sum, people served (total kg × 2.5), donation history table with columns: submittedAt date, hotel name from hotelPrincipal. Fetch data from getMyNGODonations backend method."
        },
        {
          "path": "frontend/src/components/ngo/NGOFeedbackForm.tsx",
          "operation": "create",
          "description": "Create feedback form component with donationId input (hidden or readonly), rating 1-5 star selector, and comment textarea. Submit via submitFeedback backend method. Only show this form for donations with status=Completed."
        },
        {
          "path": "frontend/src/pages/NGOPanel.tsx",
          "operation": "create",
          "description": "Create NGO panel page with tab navigation between NGODonationRequests, NGODashboard, and feedback forms for completed donations. Guard with appRole check to ensure only NGO users access this page. Show NGOProfileForm if getMyNGOProfile returns null."
        },
        {
          "path": "frontend/src/hooks/useGetMyNGODonations.ts",
          "operation": "create",
          "description": "Create query hook to fetch getMyNGODonations from backend. Returns array of Donation records matched to the calling NGO principal."
        },
        {
          "path": "frontend/src/hooks/useAcceptDonation.ts",
          "operation": "create",
          "description": "Create mutation hook for acceptDonation backend method accepting donationId bigint. Invalidate getMyNGODonations query on success."
        },
        {
          "path": "frontend/src/hooks/useRejectDonation.ts",
          "operation": "create",
          "description": "Create mutation hook for rejectDonation backend method accepting donationId bigint. Invalidate getMyNGODonations query on success."
        },
        {
          "path": "frontend/src/hooks/useSubmitFeedback.ts",
          "operation": "create",
          "description": "Create mutation hook for submitFeedback backend method accepting donationId, rating (1-5 bigint), and comment text."
        }
      ]
    },
    {
      "id": "REQ-11",
      "summary": "Build Admin Panel frontend with user management, food safety monitoring, and system analytics views",
      "acceptanceCriteria": [
        "Admin can deactivate any hotel or NGO user",
        "Food safety table shows spoilage flag with visual highlight for unsafe donations",
        "Admin can change donation status from the monitoring table",
        "Analytics figures are fetched from backend aggregation endpoints"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/admin/AdminUserManagement.tsx",
          "operation": "create",
          "description": "Create user management view listing all hotels and NGOs from listAllUsers backend method. Display columns: name (hotel.name or ngo.orgName), role (Hotel or NGO), active status, and deactivate toggle button. On toggle call deactivateUser backend method with principal and refresh list."
        },
        {
          "path": "frontend/src/components/admin/AdminFoodSafetyMonitoring.tsx",
          "operation": "create",
          "description": "Create food safety monitoring table listing all donations from listAllDonations backend method. Columns: hotel name from hotelPrincipal, foodType, quantityKg, storageCondition, timeSinceCooked, spoilageSafe flag (highlight unsafe rows with red/orange background), current status, admin status-update dropdown. On status change call updateDonationStatus backend method and refresh table."
        },
        {
          "path": "frontend/src/components/admin/AdminSystemAnalytics.tsx",
          "operation": "create",
          "description": "Create system analytics view displaying metrics from systemAnalytics backend method: totalKgRedistributed, totalUsers (hotels + NGOs count), totalDonations, wasteReducedKg. Display in card layout with iconography."
        },
        {
          "path": "frontend/src/pages/AdminPanel.tsx",
          "operation": "create",
          "description": "Create admin panel page with tab navigation between AdminUserManagement, AdminFoodSafetyMonitoring, and AdminSystemAnalytics views. Guard with appRole check to ensure only Admin users access this page. Use the authorization component to verify admin role."
        },
        {
          "path": "frontend/src/hooks/useListAllUsers.ts",
          "operation": "create",
          "description": "Create query hook for listAllUsers backend method. Returns tuple of [HotelProfile[], NGOProfile[]]."
        },
        {
          "path": "frontend/src/hooks/useListAllDonations.ts",
          "operation": "create",
          "description": "Create query hook for listAllDonations backend method. Returns array of all Donation records with hotel and NGO principal lookups."
        },
        {
          "path": "frontend/src/hooks/useDeactivateUser.ts",
          "operation": "create",
          "description": "Create mutation hook for deactivateUser backend method accepting principal. Invalidate listAllUsers query on success."
        },
        {
          "path": "frontend/src/hooks/useUpdateDonationStatus.ts",
          "operation": "create",
          "description": "Create mutation hook for updateDonationStatus backend method accepting donationId and newStatus enum. Invalidate listAllDonations query on success."
        },
        {
          "path": "frontend/src/hooks/useSystemAnalytics.ts",
          "operation": "create",
          "description": "Create query hook for systemAnalytics backend method. Returns SystemAnalytics object with totalKgRedistributed, totalUsers, totalDonations, wasteReducedKg."
        }
      ]
    },
    {
      "id": "REQ-13",
      "summary": "Apply consistent green and orange visual theme across all panels",
      "acceptanceCriteria": [
        "No blue or purple color values appear anywhere in the UI",
        "Primary actions use green; secondary highlights use orange",
        "All data views use card-based layouts",
        "Icons relate to food, location, or impact themes",
        "Theme is consistent across all panels and the login/role selection screen"
      ],
      "file_operations": [
        {
          "path": "frontend/src/index.css",
          "operation": "modify",
          "description": "Define CSS custom properties for green and orange theme colors. Primary green: #1a6b3c or similar deep green. Secondary orange: #e87722 or similar warm orange. Light backgrounds: white/light gray. Ensure no blue or purple values exist. Apply to all UI states including buttons, links, active states, focus rings."
        },
        {
          "path": "frontend/tailwind.config.js",
          "operation": "modify",
          "description": "Extend Tailwind theme with custom green and orange palette. Define primary as green (#1a6b3c), secondary as orange (#e87722). Remove or override any default blue/purple values. Configure sans-serif font family for clean typography."
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "create",
          "description": "Create layout component with navigation bar, logo placement area (for generated logo from REQ-14), and role-based navigation links. Use card-based container layout. Apply green/orange theme consistently. Include food, location, and impact iconography from inline SVG or lucide-react."
        }
      ]
    },
    {
      "id": "REQ-14",
      "summary": "Render custom Left2Lift logo image in navigation and login screen",
      "acceptanceCriteria": [
        "Logo image is rendered in the nav bar and login screen",
        "Image is served from frontend/public/assets/generated",
        "Logo uses green and orange tones consistent with the app theme"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Add img element referencing the generated logo at frontend/public/assets/generated/left2lift-logo.dim_256x256.png in the navigation bar. Set appropriate width/height and alt text."
        },
        {
          "path": "frontend/src/components/LoginButton.tsx",
          "operation": "modify",
          "description": "Add img element referencing the generated logo at frontend/public/assets/generated/left2lift-logo.dim_256x256.png above the login button. Display logo prominently on the login screen with appropriate sizing."
        }
      ]
    }
  ]
}